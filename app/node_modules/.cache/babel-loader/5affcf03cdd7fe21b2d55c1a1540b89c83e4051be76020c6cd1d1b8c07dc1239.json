{"ast":null,"code":"import React,{useState,useEffect}from'react';import'../styles/messages.css';import MessageList from'./MessageList';import MessageInput from'./MessageInput';/**\n * Messages Component\n * Direct messaging between users\n */import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Messages=_ref=>{let{currentUser}=_ref;const[conversations,setConversations]=useState([]);const[activeConversation,setActiveConversation]=useState(null);const[messages,setMessages]=useState([]);const[searchQuery,setSearchQuery]=useState('');const[loading,setLoading]=useState(true);useEffect(()=>{fetchConversations();},[currentUser]);useEffect(()=>{if(activeConversation){fetchMessages(activeConversation.id);}},[activeConversation]);const fetchConversations=async()=>{try{setLoading(true);// API call would go here\n// const response = await fetch(`/api/conversations?userId=${currentUser.id}`);\n// const data = await response.json();\nsetConversations([]);}catch(err){console.error('Failed to fetch conversations:',err);}finally{setLoading(false);}};const fetchMessages=async conversationId=>{try{// API call would go here\n// const response = await fetch(`/api/conversations/${conversationId}/messages`);\n// const data = await response.json();\nsetMessages([]);}catch(err){console.error('Failed to fetch messages:',err);}};const handleSendMessage=async content=>{if(!activeConversation)return;try{const newMessage={id:Date.now(),conversationId:activeConversation.id,senderId:currentUser.id,content,createdAt:new Date(),isRead:true};// API call would go here\n// await fetch(`/api/conversations/${activeConversation.id}/messages`, {\n//   method: 'POST',\n//   headers: { 'Content-Type': 'application/json' },\n//   body: JSON.stringify(newMessage)\n// });\nsetMessages([...messages,newMessage]);}catch(err){console.error('Failed to send message:',err);}};const filteredConversations=conversations.filter(conv=>conv.participantName.toLowerCase().includes(searchQuery.toLowerCase()));return/*#__PURE__*/_jsxs(\"div\",{className:\"messages-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"messages-sidebar\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"messages-header\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"Messages\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"search-conversations\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:searchQuery,onChange:e=>setSearchQuery(e.target.value),placeholder:\"Search conversations...\",className:\"search-input\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"conversations-list\",children:loading?/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"Loading conversations...\"}):filteredConversations.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"empty-state\",children:/*#__PURE__*/_jsx(\"p\",{children:\"No conversations yet\"})}):filteredConversations.map(conv=>/*#__PURE__*/_jsxs(\"div\",{className:\"conversation-item \".concat((activeConversation===null||activeConversation===void 0?void 0:activeConversation.id)===conv.id?'active':''),onClick:()=>setActiveConversation(conv),children:[/*#__PURE__*/_jsx(\"img\",{src:conv.participantImage||'/default-avatar.png',alt:conv.participantName,className:\"conversation-avatar\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"conversation-info\",children:[/*#__PURE__*/_jsx(\"h4\",{children:conv.participantName}),/*#__PURE__*/_jsx(\"p\",{className:\"last-message\",children:conv.lastMessage})]})]},conv.id))})]}),/*#__PURE__*/_jsx(\"div\",{className:\"messages-main\",children:activeConversation?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"messages-header-main\",children:/*#__PURE__*/_jsx(\"h3\",{children:activeConversation.participantName})}),/*#__PURE__*/_jsx(MessageList,{messages:messages,currentUser:currentUser}),/*#__PURE__*/_jsx(MessageInput,{onSendMessage:handleSendMessage})]}):/*#__PURE__*/_jsx(\"div\",{className:\"empty-state-main\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Select a conversation to start messaging\"})})})]});};export default Messages;","map":{"version":3,"names":["React","useState","useEffect","MessageList","MessageInput","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Messages","_ref","currentUser","conversations","setConversations","activeConversation","setActiveConversation","messages","setMessages","searchQuery","setSearchQuery","loading","setLoading","fetchConversations","fetchMessages","id","err","console","error","conversationId","handleSendMessage","content","newMessage","Date","now","senderId","createdAt","isRead","filteredConversations","filter","conv","participantName","toLowerCase","includes","className","children","type","value","onChange","e","target","placeholder","length","map","concat","onClick","src","participantImage","alt","lastMessage","onSendMessage"],"sources":["/home/justice/Desktop/chatting-app-1/app/src/components/messages.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport '../styles/messages.css';\nimport MessageList from './MessageList';\nimport MessageInput from './MessageInput';\n\n/**\n * Messages Component\n * Direct messaging between users\n */\nconst Messages = ({ currentUser }) => {\n  const [conversations, setConversations] = useState([]);\n  const [activeConversation, setActiveConversation] = useState(null);\n  const [messages, setMessages] = useState([]);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    fetchConversations();\n  }, [currentUser]);\n\n  useEffect(() => {\n    if (activeConversation) {\n      fetchMessages(activeConversation.id);\n    }\n  }, [activeConversation]);\n\n  const fetchConversations = async () => {\n    try {\n      setLoading(true);\n      // API call would go here\n      // const response = await fetch(`/api/conversations?userId=${currentUser.id}`);\n      // const data = await response.json();\n      setConversations([]);\n    } catch (err) {\n      console.error('Failed to fetch conversations:', err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const fetchMessages = async (conversationId) => {\n    try {\n      // API call would go here\n      // const response = await fetch(`/api/conversations/${conversationId}/messages`);\n      // const data = await response.json();\n      setMessages([]);\n    } catch (err) {\n      console.error('Failed to fetch messages:', err);\n    }\n  };\n\n  const handleSendMessage = async (content) => {\n    if (!activeConversation) return;\n\n    try {\n      const newMessage = {\n        id: Date.now(),\n        conversationId: activeConversation.id,\n        senderId: currentUser.id,\n        content,\n        createdAt: new Date(),\n        isRead: true\n      };\n\n      // API call would go here\n      // await fetch(`/api/conversations/${activeConversation.id}/messages`, {\n      //   method: 'POST',\n      //   headers: { 'Content-Type': 'application/json' },\n      //   body: JSON.stringify(newMessage)\n      // });\n\n      setMessages([...messages, newMessage]);\n    } catch (err) {\n      console.error('Failed to send message:', err);\n    }\n  };\n\n  const filteredConversations = conversations.filter(conv =>\n    conv.participantName.toLowerCase().includes(searchQuery.toLowerCase())\n  );\n\n  return (\n    <div className=\"messages-container\">\n      <div className=\"messages-sidebar\">\n        <div className=\"messages-header\">\n          <h2>Messages</h2>\n        </div>\n\n        <div className=\"search-conversations\">\n          <input\n            type=\"text\"\n            value={searchQuery}\n            onChange={(e) => setSearchQuery(e.target.value)}\n            placeholder=\"Search conversations...\"\n            className=\"search-input\"\n          />\n        </div>\n\n        <div className=\"conversations-list\">\n          {loading ? (\n            <div className=\"loading\">Loading conversations...</div>\n          ) : filteredConversations.length === 0 ? (\n            <div className=\"empty-state\">\n              <p>No conversations yet</p>\n            </div>\n          ) : (\n            filteredConversations.map(conv => (\n              <div\n                key={conv.id}\n                className={`conversation-item ${activeConversation?.id === conv.id ? 'active' : ''}`}\n                onClick={() => setActiveConversation(conv)}\n              >\n                <img\n                  src={conv.participantImage || '/default-avatar.png'}\n                  alt={conv.participantName}\n                  className=\"conversation-avatar\"\n                />\n                <div className=\"conversation-info\">\n                  <h4>{conv.participantName}</h4>\n                  <p className=\"last-message\">{conv.lastMessage}</p>\n                </div>\n              </div>\n            ))\n          )}\n        </div>\n      </div>\n\n      <div className=\"messages-main\">\n        {activeConversation ? (\n          <>\n            <div className=\"messages-header-main\">\n              <h3>{activeConversation.participantName}</h3>\n            </div>\n            \n            <MessageList\n              messages={messages}\n              currentUser={currentUser}\n            />\n            \n            <MessageInput onSendMessage={handleSendMessage} />\n          </>\n        ) : (\n          <div className=\"empty-state-main\">\n            <p>Select a conversation to start messaging</p>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default Messages;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}